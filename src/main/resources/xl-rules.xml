<?xml version="1.0"?>
<!--

    THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS
    FOR A PARTICULAR PURPOSE. THIS CODE AND INFORMATION ARE NOT SUPPORTED BY XEBIALABS.

-->
<!--
    Note: If you modify this file and automatic reloading is disabled in `planner.conf`, you must restart the XL Deploy server.
-->
<rules xmlns="http://www.xebialabs.com/xl-deploy/xl-rules">
    <!-- Add your <rule ...> and <disable-rule ...> elements here -->
    <!-- Create -->
    <rule name="advcmd.DeployedCommand.CREATE" scope="deployed">
    <conditions>
        <type>advcmd.DeployedCommandFolder</type>
        <type>advcmd.DeployedCommand</type>
        <operation>CREATE</operation>
    </conditions>
    <steps>
       <os-script>
        <order expression="true">deployed.createOrder</order>
         <script>advcmd/CommandRunner</script>
         <create-target-path>false</create-target-path>
       </os-script>
    </steps>
</rule>
    <!-- Noop -->
    <rule name="advcmd.DeployedCommand.NOOP" scope="deployed">
    <conditions>
        <type>advcmd.DeployedCommandFolder</type>
        <type>advcmd.DeployedCommand</type>
        <operation>NOOP</operation>
        <expression>deployed.alwaysRun</expression>
    </conditions>
    <steps>
       <os-script>
         <script>advcmd/CommandRunner</script>
         <create-target-path>false</create-target-path>
         <order expression="true">deployed.noopOrder</order>
       </os-script>
    </steps>
</rule>
    <!-- Destroy -->
    <rule name="advcmd.DeployedCommand.DESTROY" scope="deployed">
    <conditions>
        <type>advcmd.DeployedCommandFolder</type>
         <type>advcmd.DeployedCommand</type>
        <operation>DESTROY</operation>
        <expression>previousDeployed.undoCommand</expression>
    </conditions>
    <steps>
       <os-script>
         <script>advcmd/UndoCommandRunner</script>
         <create-target-path>false</create-target-path>
         <order expression="true">previousDeployed.destroyOrder</order>
       </os-script>
    </steps>
</rule>
    </rules>
